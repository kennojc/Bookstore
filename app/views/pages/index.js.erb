book_table = document.getElementById('userbooklist');
while (book_table.firstChild) {
book_table.removeChild(book_table.firstChild);
}

<% unless @books.nil? %>
    <% @books.each do |book| %>
        book_table.insertAdjacentHTML("beforeend","<%= escape_javascript render partial: "pages/book", book: book %>")
    <% end %>
<% end %> 